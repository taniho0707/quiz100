# ã‚·ãƒ¼ã‚±ãƒ³ã‚¹è² è·ãƒ†ã‚¹ãƒˆ - æ“ä½œã‚¬ã‚¤ãƒ‰

## äº‹å‰æº–å‚™

### 1. ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1ã§ï¼š
```bash
cd /mnt/s/git/quiz100
go run main.go
```

### 2. ç®¡ç†è€…ç”»é¢ã‚’é–‹ã

ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã®URLã‚’é–‹ãï¼š
```
http://localhost:8080/admin
```

### 3. ãƒ†ã‚¹ãƒˆã®èµ·å‹•

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2ã§ï¼š
```bash
cd /mnt/s/git/quiz100/scripts/sequence-load-test
./run.sh
```

ã¾ãŸã¯ï¼š
```bash
go run main.go
```

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ•ãƒ­ãƒ¼

### Phase 1: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¥ç¶šï¼ˆç´„30ç§’ï¼‰

ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒè‡ªå‹•çš„ã«80äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¥ç¶šã—ã¾ã™ã€‚

```
ğŸš€ ã‚·ãƒ¼ã‚±ãƒ³ã‚¹è² è·ãƒ†ã‚¹ãƒˆé–‹å§‹
ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: 80äºº
ğŸ“ å•é¡Œæ•°: 14å•

ğŸ“Š å›ç­”ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†å¸ƒ:
   all_correct: 8äºº
   all_wrong: 8äºº
   ...

=== Phase 1: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¥ç¶š ===
âœ… User001: æ¥ç¶šå®Œäº† (ãƒ‘ã‚¿ãƒ¼ãƒ³: all_correct, æœŸå¾…ã‚¹ã‚³ã‚¢: 13ç‚¹)
âœ… User002: æ¥ç¶šå®Œäº† (ãƒ‘ã‚¿ãƒ¼ãƒ³: all_wrong, æœŸå¾…ã‚¹ã‚³ã‚¢: 0ç‚¹)
...
âœ… å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆ80äººï¼‰ã®æ¥ç¶šãŒå®Œäº†ã—ã¾ã—ãŸ

â¸ï¸  ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¥ç¶šãŒå®Œäº†ã—ã¾ã—ãŸã€‚ã‚¤ãƒ™ãƒ³ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„ [Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„]
```

**æ“ä½œ**:
1. ç®¡ç†è€…ç”»é¢ã§å‚åŠ è€…ä¸€è¦§ã‚’ç¢ºèªï¼ˆ80äººæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã¯ãšï¼‰
2. ã€ŒğŸš€ ã‚¤ãƒ™ãƒ³ãƒˆé–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã‚’æŠ¼ã™

---

### Phase 2: ã‚¯ã‚¤ã‚ºã‚·ãƒ¼ã‚±ãƒ³ã‚¹

å„å•é¡Œã§ä»¥ä¸‹ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ï¼ˆå•é¡Œ1ã€œ14ï¼‰ï¼š

#### ã‚¹ãƒ†ãƒƒãƒ—1: å•é¡Œå‡ºé¡Œ

```
=== Phase 2: ã‚¯ã‚¤ã‚ºã‚·ãƒ¼ã‚±ãƒ³ã‚¹ ===

--- å•é¡Œ 1/14 ---

â¸ï¸  å•é¡Œ1ã‚’å‡ºé¡Œã—ã¦ãã ã•ã„ [Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„]
```

**æ“ä½œ**:
1. ç®¡ç†è€…ç”»é¢ã§ã€Œâ“ æ¬¡ã®å•é¡Œã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã‚’æŠ¼ã™

#### ã‚¹ãƒ†ãƒƒãƒ—2: å›ç­”é€ä¿¡ï¼ˆè‡ªå‹•ï¼‰

```
â³ å•é¡Œå‡ºé¡Œã‚’å¾…æ©Ÿä¸­...
ğŸ“ å•é¡Œ1: å›ç­”é€ä¿¡é–‹å§‹ï¼ˆ10ç§’é–“ã§åˆ†æ•£ï¼‰
âœ… å•é¡Œ1: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”é€ä¿¡å®Œäº†

â¸ï¸  å•é¡Œ1ã®å›ç­”å—ä»˜ã‚’çµ‚äº†ã—ã¦ãã ã•ã„ [Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„]
```

ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒè‡ªå‹•çš„ã«ï¼š
- 10ç§’é–“ã§80äººã®å›ç­”ã‚’åˆ†æ•£é€ä¿¡
- ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¿œã˜ãŸå›ç­”ã‚’é€ä¿¡
- ä¸€éƒ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å›ç­”ã‚’å¤‰æ›´ï¼ˆæœ€åˆã«ä¸æ­£è§£ã€1ç§’å¾Œã«æ­£è§£ï¼‰

**æ“ä½œ**:
1. ç®¡ç†è€…ç”»é¢ã§ã€Œâ° æ®‹ã‚Š5ç§’ã‚¢ãƒ©ãƒ¼ãƒˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ãŒå®Œäº†ã™ã‚‹ã®ã‚’å¾…ã¤
3. ã€ŒğŸ“Š å›ç­”çŠ¶æ³è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ã€Œâœ… å›ç­”ç™ºè¡¨ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
5. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã‚’æŠ¼ã™

#### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡ï¼ˆè‡ªå‹•ï¼‰

```
ğŸ˜„ ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡ä¸­...
âœ… ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡å®Œäº†ï¼ˆç´„45ä»¶ï¼‰

â¸ï¸  æ¬¡ã®å•é¡Œã«é€²ã‚€æº–å‚™ãŒã§ããŸã‚‰ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„
```

ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒè‡ªå‹•çš„ã«30-50äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒçµµæ–‡å­—ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’é€ä¿¡ã—ã¾ã™ã€‚

**æ“ä½œ**:
1. ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ç”»é¢ã§çµµæ–‡å­—ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
2. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã‚’æŠ¼ã™

#### å•é¡Œ2ã€œ14ã‚‚åŒæ§˜ã«ç¹°ã‚Šè¿”ã™

---

### Phase 3: çµæœç¢ºèª

å…¨14å•å®Œäº†å¾Œï¼š

```
=== Phase 3: çµæœç¢ºèª ===

â¸ï¸  æœ€çµ‚çµæœã‚’ç™ºè¡¨ã—ã¦ãã ã•ã„ [Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„]
```

**æ“ä½œ**:
1. ç®¡ç†è€…ç”»é¢ã§ã€ŒğŸ† çµæœç™ºè¡¨ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€ŒğŸ‰ ç™ºè¡¨ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã‚’æŠ¼ã™

#### çµæœæ¤œè¨¼

```
ğŸ“Š çµæœæ¤œè¨¼ä¸­...

===========================================
ğŸ¯ çµæœæ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆ
===========================================
âœ… ä¸€è‡´: 78äºº (97.5%)
âŒ ä¸ä¸€è‡´: 2äºº (2.5%)
âš ï¸  ãƒ‡ãƒ¼ã‚¿ãªã—: 0äºº (0.0%)

ä¸ä¸€è‡´ãƒ»ãƒ‡ãƒ¼ã‚¿ãªã—ã®è©³ç´°:
  User042: æœŸå¾… 0ç‚¹ â†’ å®Ÿéš› 1ç‚¹
  User080: æœŸå¾… 12ç‚¹ â†’ å®Ÿéš› 11ç‚¹
===========================================

âš ï¸  2äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚¹ã‚³ã‚¢ã®ä¸ä¸€è‡´ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿æ¬ è½ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ
```

---

### Phase 4: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```
=== Phase 4: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— ===
ğŸ§¹ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ä¸­...
âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†

âœ… ã‚·ãƒ¼ã‚±ãƒ³ã‚¹è² è·ãƒ†ã‚¹ãƒˆå®Œäº†
```

ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒè‡ªå‹•çš„ã«ã™ã¹ã¦ã®WebSocketæ¥ç¶šã‚’é–‰ã˜ã¾ã™ã€‚

---

## ã‚ˆãã‚ã‚‹å•é¡Œã¨å¯¾å‡¦æ³•

### Q1: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ¥ç¶šã§ããªã„

**ç—‡çŠ¶**: `âŒ User001: å‚åŠ ç™»éŒ²å¤±æ•—`

**å¯¾å‡¦æ³•**:
- ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
- ãƒãƒ¼ãƒˆ8080ãŒä½¿ç”¨å¯èƒ½ã‹ç¢ºèª
- `curl http://localhost:8080/api/status` ã§ç–é€šç¢ºèª

### Q2: WebSocketæ¥ç¶šãŒå¤±æ•—ã™ã‚‹

**ç—‡çŠ¶**: `âŒ User001: WebSocketæ¥ç¶šå¤±æ•—`

**å¯¾å‡¦æ³•**:
- ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šã‚’ç¢ºèª
- ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã§ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª

### Q3: ã‚¹ã‚³ã‚¢ãŒä¸€è‡´ã—ãªã„

**ç—‡çŠ¶**: ä¸ä¸€è‡´ãŒå¤šæ•°å ±å‘Šã•ã‚Œã‚‹

**å¯¾å‡¦æ³•**:
- å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ãƒ­ã‚°ã‚’ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã® answers ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¢ºèªï¼š
  ```bash
  sqlite3 database/quiz.db "SELECT * FROM answers WHERE user_id IN (42, 80);"
  ```
- ã‚µãƒ¼ãƒãƒ¼å´ã®æ¡ç‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç¢ºèª

### Q4: ãƒ†ã‚¹ãƒˆãŒé€”ä¸­ã§æ­¢ã¾ã‚‹

**ç—‡çŠ¶**: ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼å¾…ã¡ã§æ­¢ã¾ã£ãŸã¾ã¾

**å¯¾å‡¦æ³•**:
- ç®¡ç†è€…ç”»é¢ã§é©åˆ‡ãªãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‹ç¢ºèª
- ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã§ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª
- å¿…è¦ã«å¿œã˜ã¦ãƒ†ã‚¹ãƒˆã‚’å†èµ·å‹•

---

## ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®ç¢ºèª

### ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°

ã‚µãƒ¼ãƒãƒ¼ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œä¸­ã®ãƒ­ã‚°ã‚’ç¢ºèªï¼š
```
[INFO] ãƒ¦ãƒ¼ã‚¶ãƒ¼ User001 ãŒå‚åŠ ã—ã¾ã—ãŸ
[INFO] å•é¡Œ1ã®å›ç­”ã‚’å—ä¿¡: User001 -> é¸æŠè‚¢1
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª

```bash
# ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§
sqlite3 database/quiz.db "SELECT id, nickname, score FROM users;"

# å›ç­”ä¸€è¦§
sqlite3 database/quiz.db "SELECT user_id, question_number, answer_index FROM answers;"

# ã‚¹ã‚³ã‚¢ç¢ºèª
sqlite3 database/quiz.db "SELECT u.nickname, u.score FROM users u ORDER BY u.score DESC;"
```

### ãƒ†ã‚¹ãƒˆãƒ­ã‚°

ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§è©³ç´°ãªãƒ­ã‚°ã‚’ç¢ºèªã§ãã¾ã™ï¼š
```
âœ… User001: æ¥ç¶šå®Œäº† (ãƒ‘ã‚¿ãƒ¼ãƒ³: all_correct, æœŸå¾…ã‚¹ã‚³ã‚¢: 13ç‚¹)
ğŸ“Š User001: å®Ÿéš›ã®ã‚¹ã‚³ã‚¢ = 13ç‚¹
```

---

## ãƒ†ã‚¹ãƒˆå¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹å ´åˆï¼š

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cp database/quiz.db database/quiz.db.backup

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒªã‚»ãƒƒãƒˆ
sqlite3 database/quiz.db < database/init.sql

# ã¾ãŸã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•
```

---

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºä¾‹

### å•é¡Œæ•°ã‚’å¤‰æ›´ã™ã‚‹å ´åˆ

`main.go`:
```go
const TotalQuestions = 10  // 14 â†’ 10 ã«å¤‰æ›´

func generateQuestions() []Question {
    questions := []Question{
        {Number: 1, Correct: 1, Point: 0},
        {Number: 2, Correct: 2, Point: 1},
        // ... 10å•åˆ†
    }
    return questions
}
```

### ç‰¹å®šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã‘ãƒ†ã‚¹ãƒˆã™ã‚‹å ´åˆ

`main.go` ã® `generateUserProfiles()`:
```go
func (slt *SequenceLoadTester) generateUserProfiles() {
    // å…¨å“¡ã‚’ all_correct ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã™ã‚‹
    for i := 0; i < TotalUsers; i++ {
        user := &UserProfile{
            ID:       i + 1,
            Nickname: fmt.Sprintf("User%03d", i+1),
            Pattern:  AllCorrect,  // å›ºå®š
            Answers:  make(map[int]int),
        }
        user.ExpectedScore = slt.calculateExpectedScore(user.Pattern)
        slt.Users = append(slt.Users, user)
    }
}
```
