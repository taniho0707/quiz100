<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Quiz Participant</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- セッション破棄ボタン（枠外） -->
    <div class="session-reset-control">
        <button id="reset-session-btn" class="reset-btn">リセット</button>
    </div>

    <div id="main-container" class="container">
        <div id="connection-status" class="status-indicator disconnected">
            <span id="connection-text">接続中...</span>
        </div>

        <div id="join-section" class="section">
            <h1>🎉 クイズ参加</h1>
            <div class="input-group">
                <input type="text" id="nickname" placeholder="ニックネームを入力" maxlength="20">
                <button id="join-btn" class="btn btn-primary">参加する</button>
            </div>
        </div>

        <div id="waiting-section" class="section hidden">
            <h2>⏰ 開始をお待ちください</h2>
            <p>ニックネーム: <span id="user-nickname"></span></p>
            <p>現在のスコア: <span id="user-score">0</span>点</p>
        </div>

        <div id="question-section" class="section hidden">
            <div class="question-header">
                <span class="question-number">Q<span id="current-question-num">1</span></span>
            </div>
            <div class="question-content">
                <h3 id="question-text">問題文がここに表示されます</h3>
                <img id="question-image" class="question-image hidden" src="" alt="問題画像">
            </div>
            <div class="choices" id="choices-container">
                <!-- 選択肢がここに動的に挿入されます -->
            </div>
            <div class="score-display hidden">
                現在のスコア: <span id="current-score">0</span>点
            </div>
        </div>

        <div id="answer-feedback" class="feedback hidden">
            <div class="feedback-content">
                <span id="feedback-text"></span>
            </div>
        </div>

        <div id="results-section" class="section hidden">
            <h2>🏆 最終結果</h2>
            <!-- <div id="final-score" class="final-score"></div> -->
            <div id="rankings" class="rankings"></div>
        </div>

        <div id="emoji-section" class="emoji-section">
            <h4>😄 リアクション</h4>
            <div class="emoji-buttons">
                <button class="emoji-btn" data-emoji="👍" aria-label="いいね">👍</button>
                <button class="emoji-btn" data-emoji="❤️" aria-label="ハート">❤️</button>
                <button class="emoji-btn" data-emoji="😂" aria-label="笑い">😂</button>
                <button class="emoji-btn" data-emoji="😮" aria-label="驚き">😮</button>
                <button class="emoji-btn" data-emoji="😢" aria-label="悲しい">😢</button>
                <button class="emoji-btn" data-emoji="🔥" aria-label="ファイヤー">🔥</button>
                <button class="emoji-btn" data-emoji="✨" aria-label="キラキラ">✨</button>
                <button class="emoji-btn" data-emoji="💪" aria-label="がんばれ">💪</button>
            </div>
        </div>
    </div>

    <!-- セッション破棄確認モーダル -->
    <div id="reset-modal" class="modal hidden">
        <div class="modal-overlay">
            <div class="modal-content">
                <h3>⚠️ セッション破棄</h3>
                <p>これまでの回答状況が消去されます。<br>本当に破棄しますか？</p>
                <div class="modal-buttons">
                    <button id="reset-cancel-btn" class="btn btn-secondary">戻る</button>
                    <button id="reset-confirm-btn" class="btn btn-danger">破棄する</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Common utility scripts -->
    <script src="/js/common/constants.js"></script>
    <script src="/js/common/utils.js"></script>
    <script src="/js/common/state_manager.js"></script>
    <script src="/js/common/websocket_client.js"></script>
    <script src="/js/components/participant_ui.js"></script>
    <script src="/js/participant.js"></script>
</body>
</html>