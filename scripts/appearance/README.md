# Quiz Screen Appearance Test

screen.htmlの表示確認用テストサーバーです。

## 🎯 目的

- `static/html/screen.html`の各画面遷移を確認
- 様々な参加者数・シナリオでの表示テスト
- WebSocketメッセージの送信タイミング制御

## 🚀 使用方法

### 1. サーバー起動

```bash
cd scripts/appearance
go mod tidy
go run .
```

### 2. 画面確認

- **スクリーン表示**: http://localhost:8080/show
- **操作ページ**: http://localhost:8080

### 3. メッセージ送信

サーバーを起動したコンソールで**エンターキー**を押すと、順次メッセージが送信されます。

```
⌨️  エンターキーを押してメッセージを送信してください...
📤 [1/26] event_started メッセージを送信しました (接続クライアント数: 1)
```

## 📋 組み込み済みテストケース

main.goには以下26種類のメッセージが組み込まれています：

1. **基本的な画面遷移**
   - 待機画面 → タイトル表示 → チーム分け → 問題表示
   - カウントダウン → 回答状況 → 回答発表 → 結果発表

2. **様々な参加者数パターン**
   - 少人数（4人）のシナリオ
   - 大人数（100人）のシナリオ

3. **エッジケース**
   - 回答者0人 / 全員正解
   - 正解率の極端なケース

4. **チーム戦モード**
   - 小チーム（2人）/ 大チーム（8人）
   - チーム結果の表示

5. **特殊機能**
   - 絵文字リアクション
   - 画像つき問題
   - クラッカー演出

## 🛠️ カスタマイズ方法

### メッセージの変更・追加

`main.go`の`testMessages`配列を編集：

```go
var testMessages = []Message{
    {
        Type: "question_start",
        Data: map[string]interface{}{
            "question_number": 1,
            "question": map[string]interface{}{
                "text": "カスタム問題文",
                "choices": []string{"選択肢1", "選択肢2", "選択肢3", "選択肢4"},
            },
        },
    },
    // 他のメッセージ...
}
```

### 参考用テストケース

`test_cases.go`に様々なシナリオの例があります：

- `smallGroupScenario`: 少人数テスト
- `largeGroupScenario`: 大人数テスト
- `edgeCaseScenario`: エッジケーステスト
- `fullTransitionScenario`: 全画面遷移テスト
- `emojiTestScenario`: 絵文字テスト

使用例：
```go
// 少人数シナリオのみ使用
var testMessages = smallGroupScenario

// 複数シナリオを組み合わせ
var testMessages = append(append(smallGroupScenario, fullTransitionScenario...), emojiTestScenario...)
```

## 📊 テスト項目の例

### 参加者数による表示確認

| 参加者数 | 確認項目 |
|---------|---------|
| 1-5人 | 参加者グリッドの最小表示 |
| 10-20人 | 中規模グリッドレイアウト |
| 50-100人 | 大規模時のスクロール動作 |

### 回答状況の表示確認

| 正解率 | 確認項目 |
|-------|---------|
| 0% | 全員不正解時の表示 |
| 50% | 標準的な正解率の表示 |
| 100% | 全員正解時の表示 |

### チーム分けの表示確認

| チーム構成 | 確認項目 |
|----------|---------|
| 2人チーム×2 | 最小構成での表示 |
| 8人チーム×4 | 大人数チームでの表示 |
| 1人チーム | エッジケースでの表示 |

## 🔧 デバッグ機能

- **リアルタイム進捗**: 操作ページで現在のメッセージ位置を確認
- **メッセージ詳細**: コンソールで送信データの内容を確認
- **複数クライアント**: 同じURLを複数タブで開いて同期確認
- **リセット機能**: 全メッセージ送信後に'r'入力でリセット

## 📁 ファイル構成

```
scripts/appearance/
├── main.go          # メインサーバー（静的配信・WebSocket・キー操作）
├── test_cases.go    # 参考用テストケース定義
├── go.mod          # Go module設定
└── README.md       # このファイル
```

## 🎮 操作方法

1. `go run .` でサーバー起動
2. ブラウザで `/show` を開く
3. コンソールでエンターキーを連打
4. 画面遷移を確認
5. 全送信後、'r' + エンターでリセット

## 💡 活用例

- **開発時**: 新機能の画面表示確認
- **デバッグ時**: 特定シナリオでの問題再現
- **デモ時**: クライアントへの機能説明
- **テスト時**: UI/UXの品質確認